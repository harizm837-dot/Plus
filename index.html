<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–≠—Ä–¥—ç–Ω—ç –ù—É—Ç–∞–≥ ‚Äì Phase 4.6</title>

<!-- PWA manifest -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#050913">

<style>
:root{
  --bg:#050913;
  --glass:rgba(255,255,255,.09);
  --line:rgba(255,255,255,.15);
  --accent:#4fd1ff;
  --accent2:#ffd166;
  --ok:#7CFFB2;
  --danger:#ff7a7a;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,-apple-system,sans-serif}
body{
  background:
    radial-gradient(circle at 15% 0%,#123b6b,#050913 45%),
    radial-gradient(circle at bottom right,#0b3a2e,#050913 40%);
  color:#fff;height:100vh;overflow:hidden;
}

/* HEADER */
header{position:fixed;top:0;width:100%;z-index:10;padding:1rem 1.2rem;display:flex;justify-content:space-between;align-items:center;background:rgba(5,9,19,.75);backdrop-filter:blur(18px);transition:.3s}
header h1{font-size:.95rem;letter-spacing:.3em;opacity:.95;font-weight:600}
header button{background:var(--glass);border:1px solid var(--line);color:#fff;padding:.35rem .9rem;border-radius:999px;cursor:pointer;transition:.25s}
header button:hover{background:rgba(79,209,255,.12)}

/* MAIN */
main{position:absolute;top:64px;bottom:82px;width:100%;overflow-y:auto;scroll-snap-type:y mandatory;padding:0 1rem}
section{display:none;scroll-snap-align:start;animation:fadeIn .35s ease}
section.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(12px)}to{opacity:1}}

/* CARD */
.card{background:linear-gradient(145deg,rgba(255,255,255,.12),rgba(255,255,255,.03));border:1px solid var(--line);border-radius:28px;padding:1.3rem;margin-bottom:1.2rem;transition:.3s;cursor:pointer}
.card:hover{transform:scale(1.02)}
.card h2{font-size:1.1rem;margin-bottom:.4rem;font-weight:600}
.card p{font-size:.9rem;opacity:.85;line-height:1.45}

/* BADGE */
.badge{display:inline-block;padding:.25rem .6rem;border-radius:999px;font-size:.65rem;margin-bottom:.4rem;font-weight:600}
.sponsored{background:var(--accent2);color:#000}
.user{background:rgba(79,209,255,.18);color:var(--accent)}
.ad{background:rgba(255,120,120,.22);color:#ff9a9a}

/* FEED */
.feed-item{margin-bottom:1rem}
.feed-img{width:100%;border-radius:18px;margin-top:.7rem;object-fit:cover}
.feed-actions{display:flex;justify-content:space-between;font-size:.8rem;margin-top:.4rem;opacity:.85}

/* MAP */
.map{height:220px;border-radius:24px;background:radial-gradient(circle,#4fd1ff55,#0000 60%),linear-gradient(180deg,#0c1f3d,#050913);display:flex;align-items:center;justify-content:center;position:relative;font-size:.85rem;overflow:hidden}
.pin{width:14px;height:14px;border-radius:50%;background:var(--accent);box-shadow:0 0 12px var(--accent);animation:pulse 1.6s infinite ease-in-out}
@keyframes pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.8);opacity:.4}100%{transform:scale(1);opacity:1}}

/* MODAL */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:flex-end;z-index:20;transition:.3s}
.modal.show{display:flex}
.modal-content{background:#0b1326;width:100%;border-radius:32px 32px 0 0;padding:1.4rem;animation:slideUp .35s ease}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}

/* FORM */
form{display:flex;flex-direction:column;gap:.7rem}
input,textarea,select{background:var(--glass);border:1px solid var(--line);border-radius:16px;padding:.7rem .9rem;color:#fff}
textarea{resize:none;min-height:80px}
form button{background:var(--accent);border:none;color:#000;padding:.75rem;border-radius:999px;font-weight:700;cursor:pointer;transition:.25s}
form button:hover{background:#1db7ff}

/* TOAST */
.toast{position:fixed;bottom:100px;left:50%;transform:translateX(-50%) translateY(20px);background:rgba(20,40,70,.95);border:1px solid var(--line);padding:.7rem 1.2rem;border-radius:999px;opacity:0;transition:.35s;z-index:30;font-weight:600;font-size:.9rem}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

/* NAV */
nav{position:fixed;bottom:0;width:100%;height:82px;background:rgba(5,9,19,.9);backdrop-filter:blur(18px);border-top:1px solid var(--line);display:flex;justify-content:space-around;align-items:center}
nav button{background:none;border:none;color:#aaa;display:flex;flex-direction:column;align-items:center;gap:4px;font-size:.7rem;cursor:pointer}
nav button span{font-size:1.5rem;transition:.25s}
nav button.active{color:var(--accent)}
nav button.active span{transform:scale(1.2)}
</style>
</head>

<body>

<header>
  <h1>–≠–†–î–≠–ù–≠ –ù–£–¢–ê–ì</h1>
  <button onclick="goHome()">–ù“Ø“Ø—Ä</button>
</header>

<main>

<!-- HOME -->
<section id="home" class="active">
  <div class="card">
    <h2>–ú–æ–Ω–≥–æ–ª –Ω—É—Ç–∞–≥</h2>
    <p>–ê—è–ª–∞–ª ¬∑ –ù—É—Ç–∞–≥ ¬∑ –ó–∞—Ä ¬∑ –•“Ø–º“Ø“Ø—Å</p>
  </div>
  <div class="card">
    <p id="gps">üìç –ë–∞–π—Ä—à–∏–ª —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–∂ –±–∞–π–Ω–∞‚Ä¶</p>
    <p>üå§Ô∏è –¶–∞–≥ –∞–≥–∞–∞—Ä: demo</p>
  </div>
  <div class="card map">
    üó∫Ô∏è –ê–º—å–¥ –≥–∞–∑—Ä—ã–Ω –∑—É—Ä–∞–≥
    <div class="pin"></div>
  </div>
</section>

<!-- FEED -->
<section id="feed">
  <div id="feedContainer"></div>
</section>

<!-- ADD -->
<section id="add">
  <div class="card">
    <h2>‚ûï –ê—è–ª–∞–ª / –ó–∞—Ä –Ω—ç–º—ç—Ö</h2>
    <form id="addForm">
      <input placeholder="–ì–∞—Ä—á–∏–≥" required>
      <select required>
        <option>–≠–Ω–≥–∏–π–Ω –∞—è–ª–∞–ª</option>
        <option>Sponsored –∞—è–ª–∞–ª</option>
        <option>–ó–∞—Ä / “Æ–π–ª—á–∏–ª–≥—ç—ç</option>
      </select>
      <textarea placeholder="–¢–∞–π–ª–±–∞—Ä"></textarea>
      <button type="submit">–ù—ç–º—ç—Ö</button>
    </form>
  </div>
</section>

<!-- NUTAG -->
<section id="nutag">
  <div class="card">
    <h2>–ê–π–º–∞–≥ ¬∑ –°—É–º</h2>
    <p>–ù—É—Ç–∞–≥ –±“Ø—Ä–∏–π–Ω –∞—è–ª–ª—ã–Ω –º—ç–¥—ç—ç–ª—ç–ª (–¥–∞—Ä–∞–∞–≥–∏–π–Ω —à–∞—Ç)</p>
  </div>
</section>

<!-- PROFILE -->
<section id="profile">
  <div class="card">
    <h2>–ú–∏–Ω–∏–π –æ—Ä–æ–Ω –∑–∞–π</h2>
    <p>–ú–∏–Ω–∏–π –∞—è–ª–∞–ª ¬∑ –ú–∏–Ω–∏–π –∑–∞—Ä</p>
  </div>
</section>

</main>

<!-- MODAL -->
<div class="modal" id="modal" onclick="closeDetail()">
  <div class="modal-content" onclick="event.stopPropagation()">
    <h2 id="dTitle"></h2>
    <p id="dText"></p>
    <p style="margin-top:.6rem;font-size:.8rem;opacity:.7">üìç GPS ¬∑ üó∫Ô∏è –ì–∞–∑—Ä—ã–Ω –∑—É—Ä–∞–≥ ¬∑ üí¨ –°—ç—Ç–≥—ç–≥–¥—ç–ª</p>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast">–ê–º–∂–∏–ª—Ç—Ç–∞–π üëç</div>

<nav>
  <button class="active" onclick="tab('home',this)"><span>üè†</span>–ù“Ø“Ø—Ä</button>
  <button onclick="tab('feed',this)"><span>üß≠</span>Feed</button>
  <button onclick="tab('add',this)"><span>‚ûï</span>–ù—ç–º—ç—Ö</button>
  <button onclick="tab('nutag',this)"><span>üó∫Ô∏è</span>–ù—É—Ç–≥—É—É–¥</button>
  <button onclick="tab('profile',this)"><span>üë§</span>–ú–∏–Ω–∏–π</button>
</nav>

<script>
// TAB
function tab(id,el){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
  el.classList.add("active");
}

// HOME BUTTON
function goHome(){tab('home',document.querySelector("nav button"))}

// GPS
const gpsEl=document.getElementById("gps");
if(navigator.geolocation){
  navigator.geolocation.getCurrentPosition(p=>{
    gpsEl.textContent=`üìç ${p.coords.latitude.toFixed(2)}, ${p.coords.longitude.toFixed(2)}`
  },err=>{
    gpsEl.textContent="üìç –ë–∞–π—Ä—à–∏–ª –æ–ª–¥—Å–æ–Ω–≥“Ø–π (demo)";
  });
}else gpsEl.textContent="üìç –ë–∞–π—Ä—à–∏–ª —Ç–æ–¥–æ—Ä—Ö–æ–π–ª–∂ —á–∞–¥–∞—Ö–≥“Ø–π";

// TOAST
const toastEl=document.getElementById("toast");
function showToast(msg){
  toastEl.textContent=msg;
  toastEl.classList.add("show");
  setTimeout(()=>toastEl.classList.remove("show"),1600);
}

// FEED
const feedContainer=document.getElementById("feedContainer");
let feedData=JSON.parse(localStorage.getItem("feedData")||"[]");
function renderFeed(){
  feedContainer.innerHTML="";
  feedData.forEach(item=>{
    const div=document.createElement("div");
    div.className="card feed-item";
    div.innerHTML=`
      <span class="badge ${item.type==='Sponsored'? 'sponsored' : item.type==='User'? 'user':'ad'}">${item.type}</span>
      <h2>${item.title}</h2>
      <p>${item.text}</p>
      ${item.img? `<img class="feed-img" src="${item.img}">`:""}
      <div class="feed-actions">
        <span>‚ù§Ô∏è ${item.likes||0}</span>
        <span>${item.comments?`üí¨ ${item.comments}`:"üìç GPS"}</span>
      </div>
    `;
    div.onclick=()=>openDetail(item.title,item.text);
    feedContainer.appendChild(div);
  });
}
renderFeed();

// ADD FORM
document.getElementById("addForm").onsubmit=function(e){
  e.preventDefault();
  const [title,select,text]=[...this.elements].map(i=>i.value);
  const type=select;
  feedData.unshift({title,text,type,img:"https://picsum.photos/600/800?"+Math.random()});
  localStorage.setItem("feedData",JSON.stringify(feedData));
  renderFeed();
  showToast("–ù—ç–º—ç–≥–¥–ª—ç—ç ‚úì");
  this.reset();
}

// MODAL
const modal=document.getElementById("modal");
const dTitle=document.getElementById("dTitle");
const dText=document.getElementById("dText");
function openDetail(t,txt){
  dTitle.textContent=t;
  dText.textContent=txt;
  modal.classList.add("show");
}
function closeDetail(){
  modal.classList.remove("show");
}

// SERVICE WORKER REGISTER
if('serviceWorker' in navigator){
  window.addEventListener('load',()=>{
    navigator.serviceWorker.register('service-worker.js')
      .then(()=>console.log('SW Registered'))
      .catch(e=>console.log('SW Failed',e));
  });
}
</script>

</body>
</html>
